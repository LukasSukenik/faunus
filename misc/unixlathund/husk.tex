\documentclass[a4paper,10pt]{article}
\usepackage[a4paper,vmargin={2cm,2.2cm}, hmargin={1.5cm}]{geometry}
\usepackage{hyperref}
\hypersetup{pdftex,bookmarks=true,bookmarksopen=true,colorlinks=true}
\begin{document}
\renewcommand{\thefootnote}{\fnsymbol{footnote}}%A sequence of nine symbols (try it and see!)

\begin{center}
\Huge
\textbf{The Foxy $\mathcal{LATHUND}$\\ for MacOS X \& Linux\footnote[2]{To a lesser extent.}}\\
\normalsize
\vspace{0.5cm}
\emph{Compiled by Mikael Lund, Bj\"orn Persson, Bo J\"onsson\\
Last updated \today}
\end{center}

\tableofcontents

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\section{Graphics}
\subsection{Convert vector graphics to bitmap with defined size and resolution}
This is useful for Word documents where correct graphic dimensions/resolution should be maintained \emph{before} importing. A hassle, but here's one way of doing it:
\begin{enumerate}
\item Open vector graphics in Preview.app
\item In the print dialogue, create a new paper size in the desired format.
\item Print to PDF, selecting the new paper format.
\item Open new PDF in Gimp. You will be prompted for a resolution (DPI).
\item Save bitmap file to png, tiff etc.
\end{enumerate}
This could likely be done easier using ImageMagick's \verb"convert" command.

\subsection{Making vector illustrations}
Vector illustrations can be made in a number of different programs such as
\verb+Pages+, \verb+Keynote+, \verb+Powerpoint+ etc. To export them to a PDF file do as follows:
\begin{enumerate}
\item Create illustration and select the objects you wish to export.
\item Select \verb+Edit->Copy+
\item Launch Preview.app and select \verb+File->New From Clipboard+.
\item Export to PDF or any other format in \verb+File->Save As...+
\end{enumerate}

\subsection{Conversion commands etc.}
\begin{table}[h!]
\center
\begin{small}
\begin{tabular}{ll}\hline\hline
Action              & Command \\\hline
Crop blank PDF borders & \verb"pdfcrop file.pdf" \\
Convert PDF/EPS to 300 dpi tiff & \verb"convert -compress lzw -density 300x300 in.pdf out.tif" \\
Convert grace plot to pdf       & \verb"xmgrace -hardcopy -hdevice PDF file.agr"\\
Convert to monochrome           & \verb"convert -threshold 38% -despeckle out.jpg -monochrome in.jpg"\\
Print syntax-highlighted source code & \verb"enscript --media=a4 -E sourcefile"\\
Convert DVI to PS with \textbf{pretty} text & \verb"dvips -Ppdf t.dvi -o t.ps"\\
Convert PS to PDF                           & \verb"pstopdf t.ps"\\
Convert PDF to EPS                          & \verb"pdftops -eps t.pdf"\\
\hline
\end{tabular}\end{small}\end{table}

\subsubsection{How to keep bitmap EPS files small}
The package \verb"jpeg2ps" (available on macports) can be used to convert jpeg bitmap pictures into compressed EPS files. Another tool is \verb"sam2p".

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\section{Networking}
\subsection{\label{sec:proxy}Access journals from anywhere}
Establish an encrypted SSH-tunnel to any computer situated on campus:
\begin{enumerate}
\item For example: \verb+ssh -D 9999 mimer.teokem.lu.se+
\item In \verb+System Preferences->Network->Advanced->Proxies+ set SOCKS proxy to \verb+localhost+, port 9999.
\end{enumerate}
All your web browsing will now appear as if you are situated inside campus. If you have a slow connection, you may want to add ``-C'' to the ssh command to enable compression.  When closing the ssh connection, remove the proxy setting in the network preferences to return to normal browsing.

\subsection{Automatic SSH login}
This will allow login/scp to ssh servers without entering your password:
\begin{enumerate}
\item Protect your local .ssh dir: \verb"chmod 700 ~/.ssh"

\item If you do not have one, create a public ssh key.
Look at \verb"~/.ssh". If you see a file named id\_dsa.pub then you already have a public key. If not, create one with: \verb"ssh-keygen -t dsa"

\item Transfer your public key to the remote server:\\

\verb"$ cat ~/.ssh/id_dsa.pub | ssh user@server 'cat >> ~/.ssh/authorized_keys'"\\

(In this step you may be able to use \verb"ssh-copy-id user@server" instead.)
\end{enumerate}

\subsection{Mount remote disks from SSH-servers}
For this \verb+sshfs+ needs to be installed -- for example using MacPorts or MacFUSE. In this example we will mount /disk/global/mikael from the host milleotto,\\

\verb+$ sshfs milleotto.lunarc.lu.se:/disk/global/mikael mntdir+\\

\noindent The remote disk will appear in ``mntdir'' and you'll have full read and write access. To unmount, simply do \verb+umount mntdir+. As usual ``-C'' will enable compression. \textbf{Warning:} if the mntdir resides in your home directory, the remote disk may be included in the hourly/daily backup!

\subsection{Printing}
\subsubsection{Automatic CUPS detection}
CUPS printer detection has been disable in some versions of MacOS (10.5, higher?). Use the following command to re-enable automatic discovery:\\

\verb+cupsctl BrowseRemoteProtocols=cups+

\subsubsection{Connect to a specific CUPS server}
If auto-detection fails, try adding \verb"ServerName servername" to \verb"/etc/cups/client.conf". This usually causes printing to hang if the computer is disconnected from the network and, hence not recommended for laptops.

\subsection{Screen Sharing}
\subsubsection{MacOS Screen Sharing}
MacOS has a ``screen sharing'' feature (actually a VNC server) that can be enabled in the sharing preferences or via the command:\\

\verb+$ sudo echo -n enabled > /Library/Preferences/com.apple.ScreenSharing.launchd+.

\subsubsection{NoMachine on Unix}
A NX server can currently be installed only on Linux machines, while client software is available
also for Mac and Windows. Despite that NX also tunnels through SSH it is \emph{much} faster than normal X11 forwarding.

\subsection{Security}
\begin{itemize}
\item Enable the system firewall and block all incoming connections.
\item Reduce the number of services to a minimum and allow only users that will need that service.
\item Disable automatic login and enable screen locking.
\item Activate the TCP wrapper and allow only essential services:
\begin{verbatim}
/etc/hosts.deny:
  ALL: ALL
/etc/hosts.allow:
  ALL: local .mytrusted.domain
  portmap: ip_of_nfs_server : allow
\end{verbatim}
In the case of portmap, the IP is required -- names will not work. This is important for MacOS X servers sharing home directories via NFS and use filelocking.
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Software}
\subsection{\label{sec:ports}Port Managers}
..$\mathcal{A}$re handy interfaces to automatically download and install a large number of open source software in a self-consistent manner. Usually they require that Xcode -- Apple's developer and compiler tools -- are installed.
\begin{table}[h!]
\center
\begin{small}
\begin{tabular}{ll}\hline\hline
Command              & Action \\\hline
\textbf{Macports}    & (\url{http://www.macports.org})\\
\verb"port search keyword" & search for a package\\
\verb+port variants packagename+ & show \emph{variants} of a package.\\
\verb"sudo port install packagename" & install package.\\
\verb"sudo port install emacs +x11" & install emacs variant using the X11 variant.\\
\verb"sudo port -d selfupdate" & update entire package system (do this occasionally)\\
\verb"sudo port upgrade outdated" & update outdated packages\\
\verb"sudo port -u uninstall"      & remove all inactive ports\\
\verb"sudo port clean --all installed" & remove all build files and archives\\
\\
\textbf{Fink}       & (\url{http://www.finkproject.org})\\
Search for package  & \verb"apt-cache search package"\\
Install package     & \verb"sudo apt-get install package"\\
Update packages     &  \verb"sudo apt-get update|upgrade"\\
Install source fink package & \verb"sudo fink install package"\\\hline
\end{tabular}\end{small}\end{table}

Useful MacPorts packages are: \emph{grace gnuplot povray sshfs vim wget gawk coreutils findutils xmgr subversion sshfs bash-completion.}


\subsection{VMD}
Or \href{http://www.google.com/search?q=vmd}{Visual Molecular Dynamics} is an impressive program for molecular visualization/analysis and despite the name, it works nicely with MC too. A speciel ``feature'' of the mac version is that the command line tool is buried. Here is one way to resurface it:
\begin{itemize}
\item[\$] \verb+ alias vmd="/Applications/VMD\ 1.8.7.app/Contents/MacOS/startup.command"+
\end{itemize}

\subsection{Faunus}
To fetch the newest revision from the subversion repository, do\\

\verb+$ svn checkout https://faunus.svn.sourceforge.net/svnroot/faunus/trunk faunus+\\

\noindent Make sure to specify the compiler in the Makefile -- in particular parallel execution works, as of now, much better on Intel's C++ compiler than with the GNU compiler.

\subsection{\label{sec:grace}Grace}
Some tips:
\begin{itemize}
\item White borders in graphs can be removed in \LaTeX{} by including graphs with\\

\verb+\includegraphics[clip]+
\end{itemize}

\subsection{Xmgr}
I have made a MacPorts (see \ref{sec:ports}) port of this ancient\footnote{The development of Xmgr was frozen in the last century (1998). Grace is the successor.} program. Alternatively, a native MacOS package is available:\\

\url{http://idisk.mac.com/mlund/Public/Software/Xmgr.pkg.zip}\\

\subsection{Apple Terminal.app}
\subsubsection{Enable \textsc{Home} and \textsc{End} keys}
\begin{enumerate}
\item Go to \verb"Preferences->Settings->Keyboard"
\item Add: ``Home'' key, no modifier, shell string: \verb"ctrl-a" (001)
\item Add: ``End'' key, no modifier, shell string: \verb"ctrl-e" (005)
\end{enumerate}
For this to work over SSH use instead the following strings:
\begin{itemize}
\item Home: \verb"ctrl+[ [ 1 ~"
\item End: \verb"ctrl+[ [ 4 ~"
\item PgUp: \verb"ctrl+[ [ 5 ~"
\item PgDw: \verb"ctrl+[ [ 6 ~"
\end{itemize}

\subsection{VIM}
Here is an example of a typical \verb"~/.vimrc" file that provides syntax highlighting etc.:
\begin{footnotesize}\begin{verbatim}
set backspace=indent,eol,start
set autoindent
set term=ansi
syntax on
set hlsearch
colorscheme elflord
set backgound=dark
set et
set sw=2
set smarttab
\end{verbatim}\end{footnotesize}
\begin{table}[h]
\begin{small}
\begin{tabular}{ll}\hline\hline
Action         & Command \\\hline
Split screen   & \verb":S" or \verb":split"\\
Swap screen    & \verb"ctrl+w w"\\
Page down      & \verb"ctrl+f"\\
Page up        & \verb"ctrl+b"\\
End of file    & \verb"G"\\
n'th line      & :n\\
Indent all     & =G\\
\hline
\end{tabular}\end{small}\end{table}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{\LaTeX{} typesetting}
\subsection{Installing \LaTeX{}}
\LaTeX{} is available both via Fink and MacPorts and \href{http://www.tug.org/mactex}{MacTeX} (recommended) which also includes the awesome TeXShop program.

\subsection{Getting started}
\begin{enumerate}
\item Create a \LaTeX{} file, ``test.tex'', for example from the following template that shows some of the basic commands:
\begin{small}\begin{verbatim}
\documentclass[a4paper,12pt]{article}
\usepackage[a4paper,vmargin={2cm,2.2cm}, hmargin={1.5cm}]{geometry}
\usepackage{hyperref} % Enables clickable links for on screen reading
\usepackage{graphicx} % Enables graphics import
\hypersetup{pdftex,bookmarks=true,bookmarksopen=true,colorlinks=true}
\begin{document}
\section{Some section}
\subsection{Some subsection}
This is Equation~\ref{coulomb}:
\begin{equation}
\beta u = \frac{l_b z_iz_j}{r_{ij}} \cdot \exp({-\kappa r_{ij}})
\label{coulomb}
\end{equation}
...and some inline math, $\sqrt{x}$, like this.

Also web-links can be useful for on screen reading:
\href{http://www.bmj.com/cgi/content/full/319/7225/1596}{[Exciting experiments]}
\end{document}
\end{verbatim}\end{small}
\item Compile with: \verb"pdflatex test.tex" to automatically produce a PDF file with hyperlinks and bookmarks.
\end{enumerate}
Note that using pdf\LaTeX{} any graphics inserted with \verb"\includegraphics" must be in the format pdf, png, jpg, mps, or tif. EPS files \emph{cannot} be used with pdf\LaTeX{} and must be converted first.\footnote{This can be done automatically using the auto-pst-pdf package -- see Section~\ref{sec:psfrag}} For example:\\

\verb"$ epstopdf file.eps"

\subsection{Attaching papers to a document}
Insert \verb"\usepackage{pdfpages}" in the header and attach pdf files -- anywhere -- with
\begin{verbatim}
   \includepdf[pages=-]{file.pdf} % For all pages in the file
   \includepdf{file.pdf}          % For the first page only
\end{verbatim}
\noindent Fancy stuff like scaling and advanced page layouts are possible; see the manual for \verb"pdfpages".

\subsection{Attaching files to a PDF document}
Files (programs, images etc.) can be attached to PDF documents. In pdf\LaTeX{} this is done via the \verb"attachfile" package that allows file insertion with \verb"\attachfile{filename}".

\subsection{\label{sec:psfrag}Using \LaTeX{} commands in EPS figures}
Text labels in eps files generated with Xmgr, gnuplot etc. can be replaced with \LaTeX{} commands for advanced math symbols and equations.
\begin{enumerate}
\item Do like this:
\begin{verbatim}
\documentclass{article}
\usepackage[on]{auto-pst-pdf}
\begin{document}

\begin{figure}
\psfrag{MYAXIS}{$\sqrt{x+y}$} % Replace "MYAXIS" in fig with latex math.
\includegraphics{epsfile.eps}
\end{figure}

\end{document}
\end{verbatim}
\item latex/pdflatex with the argument \verb"-shell-escape" to produce either a dvi or pdf file. Note that the \verb"auto-pst-pdf" package automatically converts EPS files to PDF when using pdf\LaTeX{}.
\end{enumerate}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\section{General UNIX command}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newpage
\section{Table of useful commands}
\begin{table}[h]
\begin{small}
\begin{tabular}{ll}\hline\hline
Action              & Command \\\hline
\textbf{Processes Handling}\\
Quick and dirty suicide       & \verb"kill -9 -1"\\
Pause/resume job     & \verb"kill -s STOP|CONT pid" \\
Terminate job by name     & \verb"killall jobname" \\
Launch logout-safe job  & \verb"nohup program &" \\
Be a gentleman, run in low priority & \verb"nice program" (use when exploiting a colleagues computer)\\
\\
\textbf{Files and search}\\
Disk information   & \verb"df -h" (h for \textbf{h}uman readable)\\
Space used in current directory & \verb"du -h" (or \verb"-csh" for a summary)\\
Find file           & \verb'find * -iname "*something*.pdf"'\\
Find large files    & \verb'find * -size +1000k printf "%p %k \n"'\\
Find files and contents (mac) & \verb'mdfind text...'\\
``Double-click'' file (mac)     & \verb"open file"\\
Mount disk image (mac)    & \verb"hdid image.dmg"\\
\\
\textbf{Archives}\\
Create zip archive  & \verb"zip -r zipfile.zip file(s)"\\
Test zip archive    & \verb"unzip -t zipfile.zip"\\
Unpack zip archive  & \verb"unzip zipfile.zip [file(s)]"\\
Create tar archive  & \verb"tar -czf archive.tar.gz directory"\\
List tar archive    & \verb"tar -tzf archive.tar.gz"\\
Unpack tar archive  & \verb"tar -xzf archive.tar.gz"\\
Send files via tar and SSH & \verb+tar czf - file(s) | ssh host "cat > archive.tar.gz"+\\
                    & (For \verb".tar.bz2" files, replace \verb"z" with \verb"j")\\
\\
System information  & \verb"cat /proc/cpuinfo" (linux) \\
                    & \verb"system_profiler" (mac) \\
\\
X11 focus           & \verb"defaults write com.apple.X11 wm_ffm -bool true"\\
Terminal.all focus  & \verb"defaults write com.apple.Terminal FocusFollowsMouse -string YES"\\
\\
Get svn repository   & \verb"svn checkout URL destdir"\\
Update to latest repository & \verb"svn update"\\
Review changes       & \verb"svn status" (go to top level dir to see all)\\
Compare with latest repository & \verb"svn status -u" (if astrisks, update)\\
Compare difference's after modification& \verb"svn diff"\\
Submit svn changes   & \verb"svn commit"\\
Add file or directory& \verb"svn add file"\\
Show log             & \verb"svn log"\\
Regret and undo modification & \verb"svn revert foo"\\
Remove conflict files        & \verb"svn resolved" (not needed if using revert)\\
\\
\textbf{Text manipulation etc.}\\
Print file w. linenumbers & \verb"cat -n file.dat"\\
Manipulate columns  & \verb:cat file.dat | gawk '{print "Sum="$2+$3}':\\
Show lines with ``HIS''    & \verb+cat file.dat | grep "HIS"+\\
Show lines without ``LYS''  & \verb+cat file.dat | grep -v "LYS"+\\
Calculator (floats should have a .)  & \verb+echo "print sqrt(2)/3." | gnuplot+\\
\hline
\end{tabular}
\end{small}
\end{table}

\end{document}

