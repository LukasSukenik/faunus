=============================
= SHORT MANUAL FOR BULK.RUN =
=============================

Mikael Lund <mikael.lund@teokem.lu.se>
Dept. of Theoretical Chemistry
University of Lund, January 2003


Introduction:
==============
This text explains how to use the program 'bulk.run' to evaluate activity
coefficients/osmotic pressures in ionic solutions. This program can be freely
used and modified but we ask users to cite the following publication:

Lund, M., Jonsson, B. and Pedersen, T.
Activity Coefficients in Seawater Using Monte Carlo Simulations
Marine Chemistry, 2003, vol 80, pp95-101. 


Files:
=======
bulk.f      Fortran source code
bulk.inc    Fortran variable definitions
bulk.inp    Bulk input file
compile     Compile script
script.sh   Example script


Compiling:
===========
In order to compile the program an appropriate fortran compiler should be
installed. It has been successfully tested to work with the free Gnu Compiler
Collection (GCC) as available on most unix systems including Linux, BSD and
MacOS X. In most cases it is sufficient to execute the included compile script
by typing:

./compile

which creates a binary executable named 'bulk.run'. If you do not have a compiler
installed, we have included some binary versions in the 'bin' directory. You should
copy the appropriate version into 'bulk.run':

cp bin/your_system.run ./bulk.run


The Input File:
================
This is a text file named 'bulk.inp' and is used to define the system including
ionic species, their charges, their concentrations, temperature etc.
For a quick start one should consult the shell script 'script.sh' which
automatically simulates seawater at a variety of concentrations and temperatures.
In the following the fields in 'bulk.inp' will be explained:

** number of species
Number of different ions as defined in the next table.

** species number hardcore charge dp
Here the ions are defined. You must specify how many, their radii (in angstroms),
their valencies and their displacement parameter (dp). dp defines the maximum length
of which the particles are allowed to translate in each Monte Carlo move. High
valency ions should have a relatively short dp parameter. The dp value is of no importance
to the final result - it only influences the time for the simulation to converge.
IMPORTANT: Make sure the system is electro-neutral! That is the sum all particle charges
must be zero.

** ny1 ny2 ny3
Number of Monte Carlo loops. These can raised to improve the statistics on the obtained
activity coefficients. The total number of configurations is equal to ny1*ny2*ny3.

** ink islu
When 'ink' is differs from zero the particles are randomly distributed in the cell. This
is necessary for all first-time-simulations (equilibration). If ink is zero the ions
positions are read from a coordinate file saved when the last simulation finished.
Islu is obsolute.

** box
The particles are placed in a cubic box having a side length of 'box' (angstroms). This
determines the particle concentrations, c=n/box^3 (particles/cubic angstrom).

** dtemp eps
The systems temperature (K) and the relative dielectric constant.

** nwins nwint nfix
Leave unchanged to 10 25 0.


Simulation:
============
Start simulation by executing the 'bulk.run' program and redirect the resulting output
to a file:

./bulk.run > results

When the simulation is finished - this may take a substantial amount of time - all results
are stored in the file 'results'. Every simulation should begin with an 'equilibration run'
where the particles are allowed to position themselves in the cell. Do this by setting 'ink'
to 2 and do a short run (low ny1, ny2, and ny3 values). When finished, the particle positions
are saved to disk.
For final run is now done by setting ink=0 and at the same time increasing the number of Monte
Carlo loops (see the included 'scrips.sh' file for an example).


Results:
=========
The output results are fairly self-explained and shall not be described in detail. However it is
important to note that the simulations are performed with particles in a confined volume and
therefore activity coefficients and osmotic pressures are obtained on a molar basis. Most experimental
data is on the molal scale and hence must be converted in order to directly compare.
The single particle activity coefficients are readily calculated from the excess chemical potential
using the relation

A(excess)/kT = ln(gamma)
